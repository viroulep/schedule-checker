{"version":3,"sources":["Navigation/utils.js","utils/index.js","wca/routes.js","wca/api.js","Navigation/Navigation.js","Settings/Settings.js","Pickers/Generic.js","GroupGeneration/ModalGenRandom.js","Simulation/TimesDetail.js","data/events.js","Pickers/Event.js","data/simu.js","Pickers/Model.js","Simulation/QuickOpt.js","Simulation/QuickSimu.js","Simulation/QuickRun.js","wca/persistence.js","Competitions/SyncIcon.js","UtilsComponents/LoadingError.js","UtilsComponents/LoadingPlaceholder.js","Competitions/IndexList.js","wca/wcif.js","Competitions/Group.js","UtilsComponents/EventIcon.js","Competitions/Round.js","Competitions/Show.js","App.js","serviceWorker.js","index.js"],"names":["itemProps","active","className","cn","isPartiallyActive","isPartiallyCurrent","isExactlyActive","isCurrent","prefixed","url","process","integerDivision","x","y","result","Math","floor","remainder","timeToString","time","hour","join","setInt","e","set","def","parseInt","target","value","loadStoredConfig","simulator","saved","ls","mapSetup","setup","asObject","getSetupProps","mapModel","model","getModelProps","mapScrambling","scrambling","getScramblingProps","err","loadConfig","asMap","MapStringInt","ErrorKind","SUCCESS","console","error","errorMessage","clearAndRefreshSettings","document","location","reload","clearAndRefresh","clear","window","overridenBaseUrl","REACT_APP_WCA_URL","isStaging","wcaUrl","baseUrl","path","apiUrl","competitionsUrl","getOauthToken","setRemoteIfNeeded","params","URLSearchParams","search","has","wcaApiFetch","fetchOptions","fetch","headers","Headers","Authorization","then","response","ok","Error","statusText","json","getMe","getCompetitionWcif","id","competitionWcifUrl","getManageableCompetitions","oneYearAgo","Date","now","managed_by_me","start","toISOString","toString","signIn","paramsAsString","origin","client_id","response_type","redirect_uri","scope","Navigation","user","userLoading","Menu","pointing","secondary","to","getProps","Item","Icon","loading","name","Dropdown","item","text","simple","onClick","href","DropdownMenu","saveAction","hasChanges","icon","disabled","SettingsPanel","props","setProps","Form","Grid","doubling","textAlign","columns","Object","entries","map","k","v","Column","key","Input","inline","min","type","label","onChange","newProps","updateInProps","Settings","useState","setSetup","setModel","setScrambling","setSaved","useEffect","seHasChanges","_","isEqual","mHasChanges","scHasChanges","hasAnyChange","Header","Message","color","attached","conf","newConfig","Segment","default","GenericPicker","val","setVal","options","FormAddRandom","generated","setGenerated","setMin","max","setMax","amount","setAmount","content","as","Button","size","Array","from","random","generateRandomArray","amountOptions","keys","n","FormAddOne","setTime","Generic","scrolling","ModalGenRandom","times","setTimes","OpenButton","headerContent","open","setOpenValue","setOpen","setClose","primary","Modal","centered","onClose","Content","length","basic","relaxed","Divider","vertical","negative","Actions","Group","positive","Or","TimesDetail","compact","events","preferred_format","rank","byId","forEach","simulatedId","includes","push","official","filter","forSimulation","eventsForSimu","EventPicker","event","setEvent","availableModels","defaultModel","modelOptions","m","ModelPicker","QuickOpt","message","setMessage","maxStations","setMaxStations","maxStaff","setMaxStaff","Event","Model","timesVec","asVector","VectorTime","localOverride","optimizeStaff","Err","BestResult","Judges","Runners","Scramblers","strResult","strStaff","QuickSimu","simuGroup","Value","savedTimes","QuickRunPage","array","defaultData","data","lastFetched","usePersistence","kind","fetcher","loadedData","setData","setLoading","setError","sync","useCallback","loaded","catch","finally","storedData","SyncIcon","syncIcon","link","Popup","trigger","toLocaleString","wide","position","LoadingError","LoadingPlaceholder","Dimmer","inverted","Loader","Placeholder","Line","Competitions","competitions","fluid","comp","announced_at","IndexList","parseActivityCode","activityCode","match","r","g","a","o","eventId","roundNumber","groupNumber","attemptNumber","otherActivity","secondsForRange","startTime","endTime","getTime","index","activity","pbMap","groupsById","accuracyArray","setAccuracyArray","undefined","simulated","setSimulated","estimate","diff","abs","round","newAcc","competitors","person","noPb","worst","t","i","competitorsToTimes","List","horizontal","EventIcon","Round","childActivities","every","some","ca","CompetitionInfo","schedule","setPbMap","setGroups","onlySimulated","setOnlySimulated","allActivities","venue","venues","room","rooms","sortedActivities","sortBy","activities","groupBy","d","getFullYear","getMonth","getDate","getAllActivities","wcif","setGroupMap","persons","p","registrantId","pbs","personalBests","pb","best","assignments","assignmentCode","activityId","buildIndex","Checkbox","toggle","checked","toDateString","stackable","Competition","competitionId","fetchData","LoadingMessage","FailureMessage","LoadingWasm","Home","NotFound","getOauthTokenIfAny","token","hash","replace","hashParams","get","children","App","setSimulator","setUserLoading","currentUser","setCurrentUser","loadWasm","wasm","getSimu","setUser","me","loginUser","setTimeout","Container","basepath","Boolean","hostname","ReactDOM","render","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.07fdcc7c.chunk.js","sourcesContent":["import cn from 'classnames';\n\nconst itemProps = (active) => ({\n  className: cn('item', { active }),\n});\n\nexport const isPartiallyActive = ({\n  isPartiallyCurrent,\n}) => itemProps(isPartiallyCurrent);\n\nexport const isExactlyActive = ({\n  isCurrent,\n}) => itemProps(isCurrent);\n\nexport const prefixed = (url) => `${process.env.PUBLIC_URL}${url}`;\n","import ls from 'local-storage';\nimport { asMap, asObject } from '@viroulep/group-simulator';\nimport { prefixed } from '../Navigation/utils';\n\nconst SECS_IN_MINUTE = 60;\nconst SECS_IN_HOUR = 60 * SECS_IN_MINUTE;\n\nconst integerDivision = (x, y) => ({\n  result: Math.floor(x / y),\n  remainder: x % y,\n});\n\nexport const timeToString = (time) => {\n  let { result, remainder } = integerDivision(time, SECS_IN_HOUR);\n  const hour = result;\n  ({ result, remainder } = integerDivision(remainder, SECS_IN_MINUTE));\n  const hourStr = hour > 0 ? `${hour} hours` : '';\n  const minStr = result > 0 ? `${result} minutes` : '';\n  const secStr = `${remainder} seconds`;\n  return [hourStr, minStr, secStr].join(' ');\n};\n\nexport const setInt = (e, set, def) => set(parseInt(e.target.value, 10) || def);\n\nexport const loadStoredConfig = (simulator) => {\n  if (!simulator) {\n    return {};\n  }\n  const saved = ls('config') || {};\n  const mapSetup = saved.setup || asObject(simulator.getSetupProps());\n  const mapModel = saved.model || asObject(simulator.getModelProps());\n  const mapScrambling = saved.scrambling || asObject(simulator.getScramblingProps());\n  const err = simulator.loadConfig(\n    asMap(simulator.MapStringInt, mapSetup),\n    asMap(simulator.MapStringInt, mapModel),\n    asMap(simulator.MapStringInt, mapScrambling),\n  );\n  if (err !== simulator.ErrorKind.SUCCESS) {\n    /* eslint-disable-next-line */\n    console.error(`Could not load local config: ${simulator.errorMessage(err)}`);\n    return {\n      mapSetup: asObject(simulator.getSetupProps()),\n      mapModel: asObject(simulator.getModelProps()),\n      mapScrambling: asObject(simulator.getScramblingProps()),\n    }\n  }\n\n  return { mapSetup, mapModel, mapScrambling };\n};\n\nexport const storeConfig = (conf) => ls('config', conf);\n\nexport const clearAndRefreshSettings = () => {\n  ls('config', {});\n  document.location.reload();\n};\n\nexport const clearAndRefresh = () => {\n  ls.clear();\n  window.location = prefixed('/');\n};\n","import ls from 'local-storage';\n\nconst prodBaseUrl = 'https://www.worldcubeassociation.org';\nconst stagingBaseUrl = 'https://staging.worldcubeassociation.org';\nconst overridenBaseUrl = process.env.REACT_APP_WCA_URL;\n\nexport const setStaging = () => {\n  ls.clear();\n  ls('staging', true);\n  document.location.reload();\n};\nexport const setProd = () => {\n  ls.clear();\n  ls('staging', false);\n  document.location.reload();\n};\n\nexport const isStaging = () => overridenBaseUrl || ls('staging');\n\nconst wcaUrl = () => (overridenBaseUrl || (isStaging() ? stagingBaseUrl : prodBaseUrl));\n\nexport const getOauthClientId = () => (isStaging() ? 'example-application-id' : '3A9BGEPZcmf7CA1D77meVRMzFGT-CZq6-6oXyPgelMU');\n\nexport const baseUrl = (path = '') => `${wcaUrl()}${path}`;\n\nexport const oauthUrl = (paramsAsString) => baseUrl(`/oauth/authorize?${paramsAsString}`);\n\nexport const apiUrl = (path) => baseUrl(`/api/v0${path}`);\nexport const selfUrl = () => apiUrl('/me');\nexport const competitionsUrl = (path) => apiUrl(`/competitions${path}`);\nexport const competitionWcifUrl = (id) => competitionsUrl(`/${id}/wcif`);\n","import ls from 'local-storage';\nimport {\n  selfUrl,\n  competitionWcifUrl,\n  competitionsUrl,\n  getOauthClientId,\n  oauthUrl,\n  setStaging,\n  setProd,\n  isStaging,\n} from './routes';\n\n// For now, this is only some internal details\nconst getOauthToken = () => ls('token') || '';\n\nexport const setOauthToken = (token) => ls('token', token);\n\nexport const setRemoteIfNeeded = () => {\n  const params = new URLSearchParams(window.location.search);\n  if (params.has('staging') && !isStaging()) {\n    setStaging();\n  }\n  if (params.has('prod') && isStaging()) {\n    setProd();\n  }\n};\n\nconst wcaApiFetch = (url, fetchOptions = {}) => fetch(url,\n  {\n    ...fetchOptions,\n    headers: new Headers({\n      Authorization: `Bearer ${getOauthToken()}`,\n      'Content-Type': 'application/json',\n    }),\n  })\n  .then((response) => {\n    if (!response.ok) throw new Error(response.statusText);\n    return response;\n  })\n  .then((response) => response.json());\n\nexport const getMe = () => wcaApiFetch(selfUrl());\nexport const getCompetitionWcif = (id) => wcaApiFetch(competitionWcifUrl(id));\n\nexport const getManageableCompetitions = () => {\n  // Last 12 months: months * days * hours * minByHour * secByMin * milli\n  const oneYearAgo = new Date(Date.now() - 12 * 28 * 24 * 60 * 60 * 1000);\n  const params = new URLSearchParams({\n    managed_by_me: true,\n    start: oneYearAgo.toISOString(),\n  });\n  return wcaApiFetch(competitionsUrl(`?${params.toString()}`));\n};\n\n// Call this upon loading to check the token in local storage is still valid!\n// TODO: store user, only re-login if token is expired!\nexport const loginUser = (setUser, setLoading) => {\n  if (getOauthToken().length === 0) {\n    return;\n  }\n\n  setLoading(true);\n  getMe().then((user) => {\n    setUser(user.me);\n  }).catch(() => {\n    // invalid token or other error, reset everything.\n    ls.clear();\n  }).finally(() => setLoading(false));\n};\n\nexport const signIn = () => {\n  const { origin } = window.location;\n  const params = new URLSearchParams({\n    client_id: getOauthClientId(),\n    response_type: 'token',\n    redirect_uri: `${origin}${process.env.PUBLIC_URL}`,\n    scope: 'public manage_competitions',\n  });\n  window.location = oauthUrl(params.toString());\n};\n","import React from 'react';\nimport {\n  Menu, Dropdown, Item, Icon,\n} from 'semantic-ui-react';\nimport { Link } from '@reach/router';\nimport {\n  isPartiallyActive, isExactlyActive, prefixed,\n} from './utils';\nimport { clearAndRefresh } from '../utils';\nimport { signIn } from '../wca/api';\n\n/* eslint-disable jsx-a11y/anchor-is-valid */\nconst Navigation = ({\n  user,\n  userLoading,\n}) => (\n  <Menu pointing secondary>\n    <Link to={prefixed('/')} getProps={isExactlyActive}>\n      Home\n    </Link>\n    <Link to={prefixed('/settings')} getProps={isPartiallyActive}>\n      Settings\n    </Link>\n    <Link to={prefixed('/quick-simu')} getProps={isPartiallyActive}>\n      Quick simulation\n    </Link>\n    {user && (\n      <Link to={prefixed('/competitions')} getProps={isPartiallyActive}>\n        My competitions\n      </Link>\n    )}\n    {userLoading && (\n      <Item className=\"right\">\n        <Icon loading name=\"spinner\" />\n      </Item>\n    )}\n    {user && (\n      <Dropdown item text={user.name} className=\"right\" simple>\n        <Dropdown.Menu>\n          <Dropdown.Item onClick={clearAndRefresh}>\n            Sign out\n          </Dropdown.Item>\n        </Dropdown.Menu>\n      </Dropdown>\n    )}\n    {!user && !userLoading && (\n      <a href=\"#\" className=\"item right\" onClick={signIn}>\n        Sign in with the WCA\n      </a>\n    )}\n  </Menu>\n);\n\nexport default Navigation;\n","import React, { useState, useEffect } from 'react';\nimport { Link, Router } from '@reach/router';\nimport {\n  Grid,\n  Header,\n  Form,\n  Dropdown,\n  Segment,\n  Message,\n  Menu,\n} from 'semantic-ui-react';\nimport _ from 'lodash';\nimport { asMap } from '@viroulep/group-simulator';\n\nimport {\n  isPartiallyActive, isExactlyActive,\n} from '../Navigation/utils';\nimport './Settings.scss';\nimport { storeConfig, loadStoredConfig, clearAndRefreshSettings } from '../utils';\n\nconst DropdownMenu = ({\n  saveAction,\n  hasChanges,\n}) => (\n  <Dropdown item icon=\"cogs\" className=\"right\">\n    <Dropdown.Menu>\n      <Dropdown.Item\n        onClick={saveAction}\n        disabled={!hasChanges}\n      >\n        Save settings\n      </Dropdown.Item>\n      <Dropdown.Item onClick={clearAndRefreshSettings}>Reset settings to default</Dropdown.Item>\n    </Dropdown.Menu>\n  </Dropdown>\n);\n\n/* TODO: for import/export\n<Dropdown.Divider />\n  <Dropdown.Header>Export</Dropdown.Header>\n  <Dropdown.Item>Share</Dropdown.Item>\n  */\n\nconst SettingsPanel = ({\n  props,\n  setProps,\n}) => {\n  const updateInProps = (k, v) => {\n    const newProps = {\n      ...props,\n    };\n    // NaN evaluates as false, so if NaN take 0\n    newProps[k] = parseInt(v, 10) || 0;\n    setProps(newProps);\n  };\n\n  return (\n    <Form className=\"settings-form\">\n      <Grid doubling textAlign=\"right\" columns={3}>\n        {Object.entries(props).map(([k, v]) => (\n          <Grid.Column key={k}>\n            <Form.Input\n              inline\n              min={0}\n              type=\"number\"\n              label={k}\n              value={v}\n              onChange={(e) => updateInProps(k, e.target.value)}\n            />\n          </Grid.Column>\n        ))}\n      </Grid>\n    </Form>\n  );\n};\n\nconst Settings = ({\n  simulator,\n}) => {\n  const [setup, setSetup] = useState({});\n  const [model, setModel] = useState({});\n  const [scrambling, setScrambling] = useState({});\n  const [saved, setSaved] = useState({});\n\n  useEffect(() => {\n    const { mapSetup, mapModel, mapScrambling } = loadStoredConfig(simulator);\n    setSetup(mapSetup);\n    setModel(mapModel);\n    setScrambling(mapScrambling);\n    setSaved({\n      setup: mapSetup,\n      model: mapModel,\n      scrambling: mapScrambling,\n    });\n  }, [simulator]);\n\n  const loadConfig = () => {\n    const newConfig = { setup, model, scrambling };\n    simulator.loadConfig(\n      asMap(simulator.MapStringInt, setup),\n      asMap(simulator.MapStringInt, model),\n      asMap(simulator.MapStringInt, scrambling),\n    );\n    setSaved(newConfig);\n    storeConfig(newConfig);\n  }\n\n  const seHasChanges = !_.isEqual(saved.setup, setup);\n  const mHasChanges = !_.isEqual(saved.model, model);\n  const scHasChanges = !_.isEqual(saved.scrambling, scrambling);\n  const hasAnyChange = seHasChanges || mHasChanges || scHasChanges;\n\n  /* eslint-disable jsx-a11y/anchor-is-valid */\n  return (\n    <div>\n      <Header>\n        Simulator settings\n      </Header>\n      <Message color=\"violet\">\n        All values are unsigned integers.\n        <br />\n        All times are expressed in seconds.\n      </Message>\n      <Menu attached=\"top\" pointing color=\"violet\">\n        <Link to=\"\" getProps={isExactlyActive}>\n          Setup\n          {' '}\n          {seHasChanges ? '*' : ''}\n        </Link>\n        <Link to=\"model\" getProps={isPartiallyActive}>\n          Model parameters\n          {' '}\n          {mHasChanges ? '*' : ''}\n        </Link>\n        <Link to=\"scrambling\" getProps={isPartiallyActive}>\n          Scrambling costs\n          {' '}\n          {scHasChanges ? '*' : ''}\n        </Link>\n        <DropdownMenu\n          saveAction={loadConfig}\n          hasChanges={hasAnyChange}\n        />\n      </Menu>\n      <Segment attached=\"bottom\">\n        <Router>\n          <SettingsPanel\n            path=\"/\"\n            default\n            simulator={simulator}\n            props={setup}\n            setProps={setSetup}\n          />\n          <SettingsPanel\n            path=\"/model\"\n            simulator={simulator}\n            props={model}\n            setProps={setModel}\n          />\n          <SettingsPanel\n            path=\"/scrambling\"\n            simulator={simulator}\n            props={scrambling}\n            setProps={setScrambling}\n          />\n        </Router>\n      </Segment>\n    </div>\n  )\n};\n\nexport default Settings;\n","import React from 'react';\nimport { Dropdown } from 'semantic-ui-react';\n\n/* eslint-disable react/jsx-props-no-spreading */\nconst GenericPicker = ({\n  val,\n  setVal,\n  options,\n  ...props\n}) => (\n  <Dropdown\n    {...props}\n    value={val}\n    onChange={(e, { value }) => setVal(value)}\n    options={options}\n  />\n);\n\nexport default GenericPicker;\n","import React, { useState, useEffect } from 'react';\nimport {\n  Segment, Divider, Header, Form, Button, Modal, Grid,\n} from 'semantic-ui-react';\nimport _ from 'lodash';\n\nimport { setInt } from '../utils';\nimport GenericPicker from '../Pickers/Generic';\n\nconst generateRandomArray = (min, max, size) => Array.from(Array(size))\n  .map(() => Math.floor(Math.random() * (max - min + 1)) + min);\n\nconst DEFAULT_MIN = 10;\nconst DEFAULT_MAX = 15;\n\nconst FormAddRandom = ({\n  generated,\n  setGenerated,\n}) => {\n  const [min, setMin] = useState(DEFAULT_MIN);\n  const [max, setMax] = useState(DEFAULT_MAX);\n  const [amount, setAmount] = useState(10);\n  const error = min > max ? {\n    content: 'Max must be greater than min',\n  } : null;\n\n  const generateAndAppend = () => setGenerated([\n    ...generated,\n    ...generateRandomArray(min, max, amount),\n  ]);\n\n  useEffect(() => {\n    setMin(_.min(generated) || DEFAULT_MIN);\n    setMax(_.max(generated) || DEFAULT_MAX);\n  }, [generated]);\n\n  return (\n    <>\n      <Header as=\"h4\" textAlign=\"center\">\n        Generate random times\n      </Header>\n      <p>\n        The form below let you add some randomly generated number within\n        {' '}\n        <em>min</em>\n        {' '}\n        and\n        {' '}\n        <em>max</em>\n        .\n      </p>\n      <Form>\n        <Form.Input\n          inline\n          min={1}\n          type=\"number\"\n          label=\"Min\"\n          value={min}\n          onChange={(e) => setInt(e, setMin, min)}\n        />\n        <Form.Input\n          inline\n          min={1}\n          type=\"number\"\n          label=\"Max\"\n          value={max}\n          error={error}\n          onChange={(e) => setInt(e, setMax, max)}\n        />\n        <Form.Input\n          inline\n          min={1}\n          type=\"number\"\n          label=\"Amount\"\n          value={amount}\n          onChange={(e) => setInt(e, setAmount, amount)}\n        />\n        <Button\n          color=\"violet\"\n          disabled={!!error}\n          content=\"Generate and append\"\n          onClick={generateAndAppend}\n        />\n      </Form>\n    </>\n  )\n};\n\nconst amountOptions = Array.from(Array(10).keys()).map((n) => ({\n  text: n + 1,\n  key: n + 1,\n  value: n + 1,\n}));\n\nconst FormAddOne = ({\n  generated,\n  setGenerated,\n}) => {\n  const [time, setTime] = useState(_.max(generated) || DEFAULT_MAX);\n  const [amount, setAmount] = useState(1);\n  const generateAndAppend = () => setGenerated([\n    ...generated,\n    ...Array.from(Array(amount)).map(() => time),\n  ]);\n  return (\n    <>\n      <Header as=\"h4\" textAlign=\"center\">\n        Add specific time(s)\n      </Header>\n      <p>\n        You can add a specific time one or more time by using the form below.\n      </p>\n      <Form className=\"mb-2\">\n        <Form.Input\n          inline\n          min={1}\n          type=\"number\"\n          label=\"Time\"\n          value={time}\n          onChange={(e) => setInt(e, setTime, time)}\n        />\n      </Form>\n      <div className=\"mb-2\">\n        I want to add this value\n        {' '}\n        <GenericPicker\n          inline\n          scrolling\n          val={amount}\n          setVal={setAmount}\n          options={amountOptions}\n        />\n        {' '}\n        times.\n      </div>\n      <Button\n        color=\"violet\"\n        content=\"Append\"\n        onClick={generateAndAppend}\n      />\n    </>\n  );\n};\n\nconst ModalGenRandom = ({\n  times,\n  setTimes,\n  OpenButton,\n  headerContent,\n}) => {\n  const [open, setOpenValue] = useState(false);\n  const [generated, setGenerated] = useState([]);\n\n  const setOpen = () => setOpenValue(true);\n  const setClose = () => setOpenValue(false);\n\n  useEffect(() => {\n    setGenerated(times);\n  }, [times, open]);\n\n  return (\n    <>\n      {OpenButton ? (\n        <OpenButton onClick={setOpen} />\n      ) : (\n        <Button primary onClick={setOpen}>Generate group</Button>\n      )}\n      <Modal open={open} centered={false} onClose={setClose}>\n        <Modal.Header>\n          {headerContent ? (\n            <>{headerContent}</>\n          ) : (\n            <>Generate competitors for group</>\n          )}\n        </Modal.Header>\n        <Modal.Content>\n          <p>\n            Use this form to generate a population for the group.\n            Each number represents the average time of one competitor,\n            therefore if you want 20 competitors in the group you need to\n            generate 20 numbers.\n          </p>\n          <p>\n            There are\n            {' '}\n            {generated.length}\n            {' '}\n            competitors in the group currently:\n            <br />\n            <code>\n              {generated.join(', ')}\n            </code>\n          </p>\n          <Segment basic>\n            <Grid columns={2} relaxed=\"very\" className=\"mb-2\">\n              <Grid.Column>\n                <FormAddRandom generated={generated} setGenerated={setGenerated} />\n              </Grid.Column>\n              <Grid.Column>\n                <FormAddOne generated={generated} setGenerated={setGenerated} />\n              </Grid.Column>\n            </Grid>\n            <Divider vertical>Or</Divider>\n          </Segment>\n          <Button\n            basic\n            negative\n            content=\"Clear times\"\n            onClick={() => setGenerated([])}\n          />\n        </Modal.Content>\n        <Modal.Actions>\n          <Button.Group>\n            <Button\n              positive\n              onClick={() => { setTimes(generated); setClose(); }}\n              content=\"Save\"\n            />\n            <Button.Or />\n            <Button color=\"black\" onClick={setClose} content=\"Discard\" />\n          </Button.Group>\n        </Modal.Actions>\n      </Modal>\n    </>\n  );\n};\n\nexport default ModalGenRandom;\n","import React, { useState } from 'react';\nimport {\n  Button, Segment,\n} from 'semantic-ui-react';\nimport ModalGenRandom from '../GroupGeneration/ModalGenRandom';\n\nconst TimesDetail = ({\n  times,\n  setTimes,\n}) => {\n  const [open, setOpen] = useState(false);\n  const OpenButton = ({ onClick }) => (\n    <Button\n      color=\"violet\"\n      content=\"Set group times\"\n      onClick={onClick}\n      compact\n    />\n  );\n\n  return (\n    <div className=\"times-details\">\n      <ModalGenRandom\n        times={times}\n        setTimes={setTimes}\n        OpenButton={OpenButton}\n      />\n      <Button onClick={() => setOpen(!open)} compact>\n        {open ? (\n          <>Hide details.</>\n        ) : (\n          <>Show average times.</>\n        )}\n      </Button>\n      {open && (\n        <Segment>\n          <code>\n            {times.join(', ')}\n          </code>\n        </Segment>\n      )}\n    </div>\n  );\n};\n\nexport default TimesDetail;\n","const events = [\n  {\n    id: '333',\n    name: '3x3x3 Cube',\n    preferred_format: 'a',\n    rank: 10,\n  },\n  {\n    id: '222',\n    name: '2x2x2 Cube',\n    preferred_format: 'a',\n    rank: 20,\n  },\n  {\n    id: '444',\n    name: '4x4x4 Cube',\n    preferred_format: 'a',\n    rank: 30,\n  },\n  {\n    id: '555',\n    name: '5x5x5 Cube',\n    preferred_format: 'a',\n    rank: 40,\n  },\n  {\n    id: '666',\n    name: '6x6x6 Cube',\n    preferred_format: 'm',\n    rank: 50,\n  },\n  {\n    id: '777',\n    name: '7x7x7 Cube',\n    preferred_format: 'm',\n    rank: 60,\n  },\n  {\n    id: '333bf',\n    name: '3x3x3 Blindfolded',\n    preferred_format: '3',\n    rank: 70,\n  },\n  {\n    id: '333fm',\n    name: '3x3x3 Fewest Moves',\n    preferred_format: 'm',\n    rank: 80,\n  },\n  {\n    id: '333oh',\n    name: '3x3x3 One-Handed',\n    preferred_format: 'a',\n    rank: 90,\n  },\n  {\n    id: 'clock',\n    name: 'Clock',\n    preferred_format: 'a',\n    rank: 110,\n  },\n  {\n    id: 'minx',\n    name: 'Megaminx',\n    preferred_format: 'a',\n    rank: 120,\n  },\n  {\n    id: 'pyram',\n    name: 'Pyraminx',\n    preferred_format: 'a',\n    rank: 130,\n  },\n  {\n    id: 'skewb',\n    name: 'Skewb',\n    preferred_format: 'a',\n    rank: 140,\n  },\n  {\n    id: 'sq1',\n    name: 'Square-1',\n    preferred_format: 'a',\n    rank: 150,\n  },\n  {\n    id: '444bf',\n    name: '4x4x4 Blindfolded',\n    preferred_format: '3',\n    rank: 160,\n  },\n  {\n    id: '555bf',\n    name: '5x5x5 Blindfolded',\n    preferred_format: '3',\n    rank: 170,\n  },\n  {\n    id: '333mbf',\n    name: '3x3x3 Multi-Blind',\n    preferred_format: '3',\n    rank: 180,\n  },\n  {\n    id: '333ft',\n    name: '3x3x3 With Feet',\n    preferred_format: 'a',\n    rank: 996,\n  },\n  {\n    id: 'magic',\n    name: 'Magic',\n    preferred_format: 'a',\n    rank: 997,\n  },\n  {\n    id: 'mmagic',\n    name: 'Master Magic',\n    preferred_format: 'a',\n    rank: 998,\n  },\n  {\n    id: '333mbo',\n    name: '3x3x3 Multi-Blind Old Style',\n    preferred_format: '3',\n    rank: 999,\n  },\n];\n\nconst byId = {};\n\nevents.forEach((e) => { byId[e.id] = e; });\n\nconst simulatedId = [];\n\nevents.forEach((e) => {\n  if (e.rank < 900 && !['333fm', '333mbf'].includes(e.id)) {\n    simulatedId.push(e.id);\n  }\n});\n\nexport default {\n  official: events.filter((e) => e.rank < 900),\n  forSimulation: events.filter((e) => simulatedId.includes(e.id)),\n  byId,\n  simulatedId,\n};\n","import React from 'react';\n\nimport GenericPicker from './Generic';\nimport events from '../data/events';\n\nconst eventsForSimu = events.forSimulation.map((e) => ({\n  text: e.name,\n  key: e.id,\n  value: e.id,\n}));\n\n/* eslint-disable react/jsx-props-no-spreading */\nconst EventPicker = ({\n  event,\n  setEvent,\n  ...props\n}) => (\n  <GenericPicker\n    {...props}\n    val={event}\n    setVal={setEvent}\n    options={eventsForSimu}\n  />\n);\n\nexport default EventPicker;\n","export const availableModels = ['Runners', 'JudgesRun'];\nexport const defaultModel = availableModels[0];\nexport const defaultEvent = '333';\n","import React from 'react';\n\nimport { availableModels } from '../data/simu';\nimport GenericPicker from './Generic';\n\nconst modelOptions = availableModels.map((m) => ({\n  text: m,\n  key: m,\n  value: m,\n}));\n\n/* eslint-disable react/jsx-props-no-spreading */\nconst ModelPicker = ({\n  model,\n  setModel,\n  ...props\n}) => (\n  <GenericPicker\n    {...props}\n    val={model}\n    setVal={setModel}\n    options={modelOptions}\n  />\n);\n\nexport default ModelPicker;\n","import React, { useState } from 'react';\nimport {\n  Button, Header, Input,\n} from 'semantic-ui-react';\nimport { asVector } from '@viroulep/group-simulator';\nimport EventPicker from '../Pickers/Event';\nimport ModelPicker from '../Pickers/Model';\nimport { timeToString, setInt } from '../utils';\nimport { defaultModel, defaultEvent } from '../data/simu';\n\nconst QuickOpt = ({\n  simulator,\n  times,\n}) => {\n  const [event, setEvent] = useState(defaultEvent);\n  const [model, setModel] = useState(defaultModel);\n  const [message, setMessage] = useState('');\n  const [maxStations, setMaxStations] = useState(10);\n  const [maxStaff, setMaxStaff] = useState(14);\n\n  const runSimulation = () => {\n    const timesVec = asVector(simulator.VectorTime, times);\n    // We'll just use the default config with no override!\n    const localOverride = new simulator.MapStringInt();\n    const {\n      Err, BestResult, Judges, Runners, Scramblers,\n    } = simulator.optimizeStaff(\n      event, timesVec, maxStations, maxStaff, localOverride, model,\n    );\n    if (Err !== simulator.ErrorKind.SUCCESS) {\n      setMessage(\n        `An error occurred during the simulation: ${simulator.errorMessage(Err)}`,\n      );\n    } else {\n      const strResult = `The best group took ${timeToString(BestResult)},`;\n      const strStaff = `using ${Judges} judges, ${Scramblers} scramblers, and ${Runners} runners. `;\n      setMessage(`${strResult} ${strStaff}`);\n    }\n  };\n\n  return (\n    <>\n      <Header>\n        Quick staff optimizer\n      </Header>\n      <div className=\"opt-content\">\n        <div className=\"inputs\">\n          <Input\n            min={3}\n            type=\"number\"\n            label=\"Total staff\"\n            value={maxStaff}\n            onChange={(e) => setInt(e, setMaxStaff, maxStaff)}\n          />\n          <Input\n            min={1}\n            type=\"number\"\n            label=\"Stations\"\n            value={maxStations}\n            onChange={(e) => setInt(e, setMaxStations, maxStations)}\n          />\n        </div>\n        <p>\n          Given I have\n          {' '}\n          {maxStaff}\n          {' '}\n          staff and at most\n          {' '}\n          {maxStations}\n          {' '}\n          stations available, I want to get the shortest time for this group.\n        </p>\n        <div>\n          This group is for\n          {' '}\n          <EventPicker event={event} setEvent={setEvent} inline scrolling />\n          {' '}\n          and my staff will be using the\n          {' '}\n          <ModelPicker model={model} setModel={setModel} inline />\n          {' '}\n          system throughout the group.\n        </div>\n      </div>\n      <Button\n        primary\n        className=\"run-simu\"\n        content=\"Run it!\"\n        onClick={runSimulation}\n      />\n      <p>\n        {message}\n      </p>\n    </>\n  );\n};\n\nexport default QuickOpt;\n","import React, { useState } from 'react';\nimport {\n  Button, Header, Message,\n} from 'semantic-ui-react';\nimport { asVector } from '@viroulep/group-simulator';\nimport EventPicker from '../Pickers/Event';\nimport ModelPicker from '../Pickers/Model';\nimport { timeToString } from '../utils';\nimport { defaultModel, defaultEvent } from '../data/simu';\n\nconst QuickSimu = ({\n  simulator,\n  times,\n}) => {\n  const [event, setEvent] = useState(defaultEvent);\n  const [model, setModel] = useState(defaultModel);\n  const [message, setMessage] = useState('');\n\n  const runSimulation = () => {\n    const timesVec = asVector(simulator.VectorTime, times);\n    // We'll just use the default config with no override!\n    const localOverride = new simulator.MapStringInt();\n    const { Err, Value } = simulator.simuGroup(event, timesVec, localOverride, model);\n    if (Err !== simulator.ErrorKind.SUCCESS) {\n      setMessage(\n        `An error occurred during the simulation: ${simulator.errorMessage(Err)}`,\n      );\n    } else {\n      setMessage(`The group took ${timeToString(Value)}.`);\n    }\n  };\n\n  return (\n    <>\n      <Header>\n        Quick group simulation\n      </Header>\n      <Message\n        compact\n        color=\"brown\"\n      >\n        You can adjust the number of judges/scramblers/runners,\n        as well as the miscramble or extra rate in the settings.\n      </Message>\n      <div>\n        I want to simulate this group for\n        {' '}\n        <EventPicker event={event} setEvent={setEvent} inline scrolling />\n        {' '}\n        and my staff will be using the\n        {' '}\n        <ModelPicker model={model} setModel={setModel} inline />\n        {' '}\n        system throughout the group.\n      </div>\n      <Button\n        primary\n        className=\"run-simu\"\n        content=\"Run it!\"\n        onClick={runSimulation}\n      />\n      <p>\n        {message}\n      </p>\n    </>\n  );\n};\n\nexport default QuickSimu;\n","import React, { useState } from 'react';\nimport {\n  Header,\n} from 'semantic-ui-react';\nimport TimesDetail from './TimesDetail';\nimport QuickOpt from './QuickOpt';\nimport QuickSimu from './QuickSimu';\nimport './QuickRun.scss';\n\n// Poor man's database\nlet savedTimes = [];\n\nconst QuickRunPage = ({\n  simulator,\n}) => {\n  const [times, setTimes] = useState(savedTimes);\n  const setPersistedTimes = (array) => {\n    savedTimes = array;\n    setTimes(array);\n  };\n\n  return (\n    <>\n      <Header>\n        Group setup\n      </Header>\n      <div>\n        There are currently\n        {' '}\n        {times.length}\n        {' '}\n        competitors in the group.\n        <TimesDetail times={times} setTimes={setPersistedTimes} />\n      </div>\n      <QuickSimu simulator={simulator} times={times} />\n      <QuickOpt simulator={simulator} times={times} />\n    </>\n  );\n};\n\nexport default QuickRunPage;\n","import { useState, useEffect, useCallback } from 'react';\nimport ls from 'local-storage';\n\nconst defaultData = {\n  data: null,\n  lastFetched: null,\n};\n\n/* eslint-disable import/prefer-default-export */\nexport const usePersistence = (kind, fetcher) => {\n  const [loadedData, setData] = useState({\n    ...defaultData,\n  });\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  const sync = useCallback(() => {\n    setLoading(true);\n    setError(null);\n    fetcher().then((loaded) => {\n      const data = {\n        data: loaded,\n        lastFetched: Date.now(),\n      };\n      setData(data);\n      ls(kind, data);\n    }).catch((err) => {\n      setError(err.message);\n    }).finally(() => setLoading(false));\n  }, [kind, fetcher, setData, setError]);\n\n  useEffect(() => {\n    const storedData = ls(kind) || {\n      ...defaultData,\n    };\n    if (!storedData.lastFetched) {\n      sync();\n    } else {\n      setData(storedData);\n      setLoading(false);\n    }\n  }, [kind, sync]);\n\n  return {\n    loadedData,\n    loading,\n    error,\n    sync,\n  };\n};\n","import React from 'react';\nimport { Icon, Popup } from 'semantic-ui-react';\n\nconst SyncIcon = ({\n  loading,\n  sync,\n  lastFetched,\n}) => {\n  const syncIcon = (\n    <Icon\n      link\n      name=\"sync\"\n      size=\"small\"\n      loading={loading}\n      onClick={sync}\n    />\n  );\n  return (\n    <>\n      {lastFetched ? (\n        <Popup\n          trigger={syncIcon}\n          content={`Last fetched on ${new Date(lastFetched).toLocaleString()}`}\n          size=\"small\"\n          wide\n          position=\"bottom center\"\n        />\n      ) : (\n        syncIcon\n      )}\n    </>\n  );\n};\n\nexport default SyncIcon;\n","import React from 'react';\nimport { Message } from 'semantic-ui-react';\n\nconst LoadingError = ({ error }) => (\n  <Message negative>\n    Something wrong happened when loading the data:\n    <pre>\n      {error}\n    </pre>\n    Your authentification token may have expired, you may try to sign out then\n    back in, or to use the &quot;Clear locally stored data&quot; option in the menu.\n    <br />\n    If the issue persists, it most likely means the WCA website is unreachable.\n    or the WCA website is unreachable.\n  </Message>\n);\n\nexport default LoadingError;\n","import React from 'react';\nimport { Dimmer, Placeholder, Loader } from 'semantic-ui-react';\n\nconst LoadingPlaceholder = () => (\n  <>\n    <Dimmer active inverted>\n      <Loader active inverted />\n    </Dimmer>\n    <Placeholder>\n      <Placeholder.Line />\n      <Placeholder.Line />\n    </Placeholder>\n  </>\n);\n\nexport default LoadingPlaceholder;\n","import React from 'react';\nimport { Link } from '@reach/router';\nimport {\n  Menu, Header, Segment,\n} from 'semantic-ui-react';\nimport cn from 'classnames';\n\nimport { getManageableCompetitions } from '../wca/api';\nimport { usePersistence } from '../wca/persistence';\nimport SyncIcon from './SyncIcon';\nimport LoadingError from '../UtilsComponents/LoadingError';\nimport LoadingPlaceholder from '../UtilsComponents/LoadingPlaceholder';\nimport './IndexList.scss';\n\nconst Competitions = ({\n  competitions,\n}) => (\n  <Menu vertical fluid className=\"competitions-list\">\n    {competitions.map((comp) => (\n      <Link\n        key={comp.id}\n        to={comp.id}\n        className={cn('item', {\n          'not-announced': !comp.announced_at,\n        })}\n      >\n        {comp.name}\n      </Link>\n    ))}\n  </Menu>\n);\n\nconst IndexList = () => {\n  const {\n    loadedData, loading, error, sync,\n  } = usePersistence('competitions.index', getManageableCompetitions);\n  const { data, lastFetched } = loadedData;\n  return (\n    <>\n      <Header className=\"my-comps\">\n        My recent competitions\n        <SyncIcon\n          loading={loading}\n          sync={sync}\n          lastFetched={lastFetched}\n        />\n      </Header>\n      {error && (\n        <LoadingError error={error} />\n      )}\n      {loading && (\n        <Segment>\n          <LoadingPlaceholder />\n        </Segment>\n      )}\n      {!loading && data && (\n        <Competitions competitions={data} />\n      )}\n    </>\n  );\n};\n\nexport default IndexList;\n","import events from '../data/events';\n\nexport const parseActivityCode = (activityCode) => {\n  const [, e, r, g, a, o] = activityCode.match(\n    /^(\\w+)(?:-r(\\d+))?(?:-g(\\d+))?(?:-a(\\d+))?(?:-(\\w+))?$/,\n  );\n  return {\n    eventId: e === 'other' ? null : e,\n    roundNumber: r ? parseInt(r, 10) : null,\n    groupNumber: g ? parseInt(g, 10) : null,\n    attemptNumber: a ? parseInt(a, 10) : null,\n    otherActivity: o,\n  };\n};\n\nexport const activityCodeToName = (activityCode) => {\n  const {\n    eventId, roundNumber, groupNumber, attemptNumber,\n  } = parseActivityCode(activityCode);\n  return [\n    eventId && events.byId[eventId].name,\n    roundNumber && `Round ${roundNumber}`,\n    groupNumber && `Group ${groupNumber}`,\n    attemptNumber && `Attempt ${attemptNumber}`,\n  ].filter((x) => x).join(', ');\n};\n","import React, { useState, useEffect } from 'react';\nimport {\n  Button, Divider, List, Header,\n} from 'semantic-ui-react';\nimport { asVector } from '@viroulep/group-simulator';\nimport _ from 'lodash';\n\nimport { parseActivityCode } from '../wca/wcif';\nimport { timeToString } from '../utils';\nimport GroupGenerator from '../GroupGeneration/ModalGenRandom';\n\n\nconst competitorsToTimes = (competitors, pbMap, eventId) => {\n  let times = competitors.map((person) => pbMap[person][eventId]);\n  let noPb = 0;\n  times = times.filter((t) => {\n    if (t === undefined) {\n      noPb += 1;\n    }\n    return t !== undefined;\n  });\n  const worst = times[times.length - 1];\n  if (worst) {\n    for (let i = 0; i < noPb; i += 1) {\n      times.push(worst);\n    }\n  }\n  return times;\n};\n\nconst secondsForRange = (startTime, endTime) => Math.floor(\n  (new Date(endTime).getTime() - new Date(startTime).getTime()) / 1000,\n);\n\nconst openGroupButton = (size) => ({ onClick }) => (\n  <Button\n    size=\"tiny\"\n    compact\n    content={`Manage times (${size})`}\n    className=\"mb-2\"\n    onClick={onClick}\n  />\n);\n\n\nconst Group = ({\n  index,\n  simulator,\n  activity,\n  pbMap,\n  groupsById,\n  accuracyArray,\n  setAccuracyArray,\n}) => {\n  const [error, setError] = useState(undefined);\n  const [simulated, setSimulated] = useState(undefined);\n  const [times, setTimes] = useState([]);\n\n  useEffect(() => {\n    if (times.length === 0) {\n      return;\n    }\n    const { activityCode } = activity;\n    const { eventId } = parseActivityCode(activityCode);\n    const timesVec = asVector(simulator.VectorTime, times);\n    // We'll just use the default config with no override!\n    const localOverride = new simulator.MapStringInt();\n    const { Err, Value } = simulator.simuGroup(\n      eventId, timesVec, localOverride, 'Runners',\n    );\n    if (Err !== simulator.ErrorKind.SUCCESS) {\n      setError(\n        `An error occurred during the simulation: ${simulator.errorMessage(Err)}`,\n      );\n    } else {\n      setSimulated(Value);\n    }\n  }, [times, simulator, activity]);\n\n  useEffect(() => {\n    if (simulated === undefined) {\n      return;\n    }\n    const { startTime, endTime } = activity;\n    const estimate = secondsForRange(startTime, endTime);\n    const diff = Math.abs(Math.round(((simulated - estimate) / estimate) * 100));\n    const newAcc = [\n      ...accuracyArray,\n    ];\n    newAcc[index] = diff < 10;\n    if (!_.isEqual(accuracyArray, newAcc)) {\n      setAccuracyArray(newAcc);\n    }\n  }, [index, accuracyArray, setAccuracyArray, simulated, activity]);\n\n  const {\n    id, name, activityCode, startTime, endTime,\n  } = activity;\n  const { eventId } = parseActivityCode(activityCode);\n\n  useEffect(() => {\n    setTimes(competitorsToTimes(groupsById[id] || [], pbMap, eventId));\n  }, [groupsById, id, pbMap, eventId]);\n\n  return (\n    <List.Item>\n      <Divider horizontal>\n        <Header as=\"h4\">\n          {name}\n        </Header>\n      </Divider>\n      <p>\n        Scheduled for\n        {' '}\n        {timeToString(secondsForRange(startTime, endTime))}\n        .\n      </p>\n      <Header as=\"h5\" content=\"Simulation\" className=\"mb-2\" />\n      <GroupGenerator\n        times={times}\n        setTimes={setTimes}\n        OpenButton={openGroupButton(times.length)}\n        headerContent={`Times for ${name}`}\n      />\n      <p>\n        {error && (\n          <>{error}</>\n        )}\n        {!error && simulated && (\n          <>\n            Simulation took\n            {timeToString(simulated)}\n            .\n          </>\n        )}\n        {!error && !simulated && (\n          <>No simulation result yet</>\n        )}\n      </p>\n    </List.Item>\n  );\n};\n\nexport default Group;\n","import React from 'react';\nimport { Icon } from 'semantic-ui-react';\n\nimport '../wca/cubing-icons.css';\nimport './EventIcon.scss';\n\n/* eslint-disable react/jsx-props-no-spreading */\nconst EventIcon = ({\n  id,\n  ...props\n}) => (\n  <Icon className={`cubing-icon event-${id}`} {...props} />\n);\n\nexport default EventIcon;\n","import React, { useState } from 'react';\nimport {\n  List, Header, Grid, Segment,\n} from 'semantic-ui-react';\nimport { parseActivityCode } from '../wca/wcif';\nimport Group from './Group';\nimport EventIcon from '../UtilsComponents/EventIcon';\n\n\nconst Round = ({\n  simulator,\n  comp,\n  activity,\n  pbMap,\n  groupsById,\n}) => {\n  const { activityCode, name, childActivities } = activity;\n  const { eventId } = parseActivityCode(activityCode);\n  const [accuracyArray, setAccuracyArray] = useState(\n    childActivities.map(() => undefined),\n  );\n  let color = 'black';\n  if (accuracyArray.every((a) => a)) {\n    color = 'green';\n  } else if (accuracyArray.some((a) => a !== undefined)) {\n    color = 'orange';\n  }\n\n  return (\n    <Grid.Column key={activity.id}>\n      <Segment color={color}>\n        <Header as=\"h3\">\n          {eventId && (\n            <EventIcon id={eventId} />\n          )}\n          <Header.Content>\n            {name}\n          </Header.Content>\n        </Header>\n        <List relaxed>\n          {childActivities.map((ca, index) => (\n            <Group\n              index={index}\n              key={ca.id}\n              activity={ca}\n              color={color}\n              accuracyArray={accuracyArray}\n              setAccuracyArray={setAccuracyArray}\n              comp={comp}\n              pbMap={pbMap}\n              groupsById={groupsById}\n              simulator={simulator}\n            />\n          ))}\n        </List>\n      </Segment>\n    </Grid.Column>\n  );\n};\n\nexport default Round;\n","import React, {\n  Fragment, useCallback, useState, useEffect,\n} from 'react';\nimport {\n  Divider, Grid, Header, Segment, Checkbox,\n} from 'semantic-ui-react';\nimport _ from 'lodash';\n\nimport { getCompetitionWcif } from '../wca/api';\nimport { parseActivityCode } from '../wca/wcif';\nimport { usePersistence } from '../wca/persistence';\nimport SyncIcon from './SyncIcon';\nimport LoadingError from '../UtilsComponents/LoadingError';\nimport LoadingPlaceholder from '../UtilsComponents/LoadingPlaceholder';\nimport Round from './Round';\nimport events from '../data/events';\n\nconst buildIndex = (wcif, setPbMap, setGroupMap) => {\n  const pbMap = {\n  };\n  const groupsById = {\n  };\n\n  wcif.persons.forEach((p) => {\n    if (!p.registrantId) {\n      return;\n    }\n    const pbs = {};\n    p.personalBests.forEach((pb) => { pbs[pb.eventId] = Math.floor(pb.best / 100); });\n    pbMap[p.registrantId] = pbs;\n    p.assignments.forEach((a) => {\n      if (a.assignmentCode === 'competitor') {\n        if (!groupsById[a.activityId]) {\n          groupsById[a.activityId] = [];\n        }\n        groupsById[a.activityId].push(p.registrantId);\n      }\n    });\n  });\n\n  setPbMap(pbMap);\n  setGroupMap(groupsById);\n};\n\nconst formatDate = (d) => `${d.getFullYear()}-${d.getMonth() + 1}-${d.getDate()}`;\n\nconst getAllActivities = (schedule, onlySimulated) => {\n  // Return all activities for first venue/first room\n  // TODO: extend to take for a given room\n  const venue = schedule.venues[0];\n  if (!venue) {\n    return [];\n  }\n  const room = venue.rooms[0];\n  if (!room) {\n    return [];\n  }\n  const sortedActivities = _.sortBy(room.activities.filter(\n    (a) => !onlySimulated\n    || events.simulatedId.includes(parseActivityCode(a.activityCode).eventId),\n  ), ['startTime']);\n  return _.groupBy(sortedActivities, (a) => formatDate(new Date(a.startTime)));\n};\n\nconst CompetitionInfo = ({\n  simulator,\n  comp,\n}) => {\n  const { schedule } = comp;\n  const [pbMap, setPbMap] = useState({});\n  const [groupsById, setGroups] = useState({});\n  const [onlySimulated, setOnlySimulated] = useState(true);\n  const allActivities = getAllActivities(schedule, onlySimulated);\n  useEffect(() => buildIndex(comp, setPbMap, setGroups), [comp]);\n\n  return (\n    <>\n      <p>\n        You can review the schedule below.\n      </p>\n      <Checkbox\n        toggle\n        label=\"Show only event that can be simulated\"\n        checked={onlySimulated}\n        onChange={() => setOnlySimulated(!onlySimulated)}\n      />\n      {_.map(allActivities, (v, k) => (\n        <Fragment key={k}>\n          <Divider horizontal>\n            <Header as=\"h2\">\n              {new Date(k).toDateString()}\n            </Header>\n          </Divider>\n          <Grid columns={3} stackable>\n            {v.map((activity) => (\n              <Round\n                key={activity.id}\n                activity={activity}\n                comp={comp}\n                pbMap={pbMap}\n                groupsById={groupsById}\n                simulator={simulator}\n              />\n            ))}\n          </Grid>\n        </Fragment>\n      ))}\n    </>\n  )\n};\n\nconst Competition = ({\n  competitionId,\n  simulator,\n}) => {\n  const fetchData = useCallback(\n    () => getCompetitionWcif(competitionId),\n    [competitionId],\n  );\n  const {\n    loadedData, loading, error, sync,\n  } = usePersistence(\n    `competitions.${competitionId}`,\n    fetchData,\n  );\n  const { data, lastFetched } = loadedData;\n  return (\n    <>\n      <Header as=\"h1\" className=\"my-comps\">\n        {data ? (\n          data.name\n        ) : (\n          competitionId\n        )}\n        <SyncIcon\n          loading={loading}\n          sync={sync}\n          lastFetched={lastFetched}\n        />\n      </Header>\n      {error && (\n        <LoadingError error={error} />\n      )}\n      {loading && (\n        <Segment>\n          <LoadingPlaceholder />\n        </Segment>\n      )}\n      {!loading && data && (\n        <CompetitionInfo comp={data} simulator={simulator} />\n      )}\n    </>\n  );\n};\n\nexport default Competition;\n","import React, { useState, useEffect } from 'react';\nimport {\n  Button, Container, Message, Icon,\n} from 'semantic-ui-react';\nimport { getSimu } from '@viroulep/group-simulator';\nimport { Router } from '@reach/router';\n\nimport './App.scss';\nimport Navigation from './Navigation/Navigation';\nimport Settings from './Settings/Settings';\nimport QuickRunPage from './Simulation/QuickRun';\nimport { loadStoredConfig } from './utils';\nimport {\n  setOauthToken,\n  loginUser,\n  setRemoteIfNeeded,\n} from './wca/api';\nimport { isStaging } from './wca/routes';\nimport CompetitionsList from './Competitions/IndexList';\nimport Competition from './Competitions/Show';\n\nconst LoadingMessage = () => (\n  <>\n    <Message.Header>Loading required content</Message.Header>\n    Please wait while the page is loading a required module.\n  </>\n);\n\nconst FailureMessage = () => (\n  <>\n    <p>\n      The loading of the module timed out.\n      It&pos;s likely that there was an error and that your browser does not support WebAssembly.\n    </p>\n\n    <p>\n      This module is necessary for this application, it is pointless to show\n      you anything more than this error message at this point.\n      <br />\n      Feel free to check this website to make sure your browser is supported.\n    </p>\n    <Button\n      href=\"https://caniuse.com/#feat=wasm\"\n      target=\"_blank\"\n      secondary\n    >\n      Check browser compatibility\n    </Button>\n  </>\n);\n\n// Use dismissable with wasm: info loading, green loaded, red timeout!\nconst LoadingWasm = ({\n  simulator,\n  loading,\n}) => (\n  <>\n    {!simulator && (\n      <Message\n        icon\n        color={loading ? 'teal' : 'red'}\n      >\n        {loading && (\n          <Icon name=\"circle notched\" loading />\n        )}\n        <Message.Content>\n          {loading ? (\n            <LoadingMessage />\n          ) : (\n            <FailureMessage />\n          )}\n        </Message.Content>\n      </Message>\n    )}\n  </>\n);\n\nconst Home = () => (\n  <div>\n    This page is a work in progress and most likely won&apos;t do what you expect.\n    <br />\n    You should not use it.\n    <br />\n    Come back later.\n  </div>\n);\n\nconst NotFound = () => <p>Oups, it&apos;s a 404</p>;\n\nconst getOauthTokenIfAny = () => {\n  const hash = window.location.hash.replace(/^#/, '');\n  const hashParams = new URLSearchParams(hash);\n  if (hashParams.has('access_token')) {\n    window.location.hash = '';\n    setOauthToken(hashParams.get('access_token'));\n  }\n};\n\nconst Competitions = ({ children }) => <>{children}</>;\n\nfunction App() {\n  const [simulator, setSimulator] = useState(undefined);\n  const [loading, setLoading] = useState(true);\n  const [userLoading, setUserLoading] = useState(false);\n  const [currentUser, setCurrentUser] = useState(null);\n\n  const loadWasm = async () => {\n    const wasm = getSimu(() => { setSimulator(wasm); setLoading(false) });\n  };\n\n  // Pass '[]' as a dependency, so that it's ran just once.\n  useEffect(() => {\n    loadWasm();\n    setRemoteIfNeeded();\n    getOauthTokenIfAny();\n    loginUser(setCurrentUser, setUserLoading);\n    // Register a timeout on the loading process\n    setTimeout(() => setLoading(false), 3000);\n  }, []);\n\n  useEffect(() => { loadStoredConfig(simulator); }, [simulator]);\n\n  return (\n    <Container>\n      <LoadingWasm simulator={simulator} loading={loading} />\n      {simulator && (\n        <>\n          <Navigation\n            user={currentUser}\n            userLoading={userLoading}\n          />\n          {isStaging() && (\n            <Message size=\"small\" color=\"pink\">\n              You&apos;re not currently using the WCA&apos;s production data.\n            </Message>\n          )}\n          <Router basepath={process.env.PUBLIC_URL}>\n            <Home path=\"/\" />\n            <Settings simulator={simulator} path=\"settings/*\" />\n            <QuickRunPage simulator={simulator} path=\"/quick-simu\" />\n            {currentUser && (\n              <Competitions path=\"competitions\">\n                <CompetitionsList path=\"/\" />\n                <Competition path=\":competitionId\" simulator={simulator} />\n              </Competitions>\n            )}\n            <NotFound default />\n          </Router>\n        </>\n      )}\n    </Container>\n  );\n}\n\nexport default App;\n","/* eslint-disable */\n// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost'\n    // [::1] is the IPv6 localhost address.\n    || window.location.hostname === '[::1]'\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    || window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,\n    ),\n);\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all '\n                  + 'tabs for this page are closed. See https://bit.ly/CRA-PWA.',\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404\n        || (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.',\n      );\n    });\n}\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service '\n              + 'worker. To learn more, visit https://bit.ly/CRA-PWA',\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport 'fomantic-ui-css/semantic.css';\n\n// NOTE:\n// import { Link } from 'react-router-dom'\n// import { Button } from 'semantic-ui-react'\n\n// //  `to` prop is not handled in `Button` and will be passed to `Link` component\n// <Button as={Link} to=\"/home\">\n// To homepage\n// </Button>\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root'),\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}